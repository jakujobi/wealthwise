{% extends "base.html" %}
{% load static %}
{% block content %}
<h1>Event</h1>

<form method="POST">
    {% csrf_token %}
    {% if error_message %}
        <p style="color: red;">{{ error_message }}</p>
    {% endif %}
    <label for="title">Title</label>
    <input type="text" name="title" id="title" maxlength="255" required value="{{ event.title|default:'' }}">
    <br>
    <br>
    
    <label>Start Date Time - </label>
    <t> {{ event.event_start_timestamp|default:'' }}</t>
    <br>
    <label for="event_start_timestamp">New Start Date Time</label>
    <input type="datetime-local" name="event_start_timestamp" id="start_timestamp" required value="{{ event.event_start_timestamp|default:'' }}">
    <br>
    <br>
    
    <label>End Date Time - </label>
    <t> {{ event.event_end_timestamp|default:'' }}</t>
    <br>
    <label for="event_end_timestamp">New End Date Time</label>
    <input type="datetime-local" name="event_end_timestamp" id="end_timestamp" required value="{{ event.event_end_timestamp|default:'' }}">
    <br>
    <br>

    <label for="description">Description</label>
    <textarea name="description" id="description" rows="4" cols="50">{{ event.description|default:'' }}</textarea>
    <br>

    <label for="location">Location</label>
    <textarea name="location" id="location" rows="2" cols="50">{{ event.location|default:'' }}</textarea>
    <br>

    <br>
    <button type="submit" class="btn btn-primary">Modify Event</button>
    <a class="btn" href="{% url 'view' %}">Cancel</a>
</form>

<a class="btn btn-danger" href="#" onclick="confirmDelete({{ event.event_id }})">Delete Event</a>

<script>
function confirmDelete(eventId) {
    if (confirm("Are you sure you want to delete this event? This action cannot be undone.")) {
        window.location.href = "{% url 'deleteEvent' event.event_id %}";
    }
}
</script>
{% endblock content %}
